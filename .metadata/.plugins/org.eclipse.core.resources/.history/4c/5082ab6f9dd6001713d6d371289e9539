package lab3;

import java.io.*;


public class PasswordLibrary {

	public static void main(String[] args) {
		
		String fileName= "PasswordLib.dat";
		File file = new File(fileName);
		String pwd = null;
		int digit = 0;
		int letter = 0;
		int special = 0;
		
		try {
			BufferedReader br = new BufferedReader(new FileReader(file));
			pwd = br.readLine();
			br.close();
		}catch(FileNotFoundException e) {
			System.out.println("Error: File not found");
		}catch(IOException e) {
			System.out.println("Error: Unable to read file");
		}
		try {
			for(int i=0; i<pwd.length(); i++) {	
				char check = pwd.charAt(i);
				if(Character.isDigit(check)) {
					digit++;					
				}
				if(Character.isLetter(check)) {
					letter++;					
				}
				if(pwd.substring(i, i+1).equals("!")) {
					
				}
			}				
			if(pwd.length() < 8) {					
				throw new EightDigitsException(pwd);
			}				
			if(digit<1) {
				throw new NumberException(pwd);
			}
			if(letter<1) {
				throw new LetterException(pwd);
			}			
		System.out.println(pwd);
		}catch(EightDigitsException e) {
			System.out.println("Error: Password length should have at least 8 characters");
		}catch(NumberException e) {
			System.out.println("Error: Password should have at least 1 number");
		}catch(LetterException e) {
			System.out.println("Error: Password should have at least 1 letter");
		}
		
	}
}

class EightDigitsException extends Exception{
	
	String input;
	
	EightDigitsException(String input){
		this.input = input;
	}

	@Override
	public String toString() {
		return "EightDigitsException [password is only " + input.length() + " digits long";
	}		
}

class NumberException extends Exception{
	
	String input;
	
	NumberException(String input){
		this.input = input;
	}

	@Override
	public String toString() {
		return "NumberException [password should include at least a number]";
	}		
}

class LetterException extends Exception{
	
	String input;
	
	LetterException(String input){
		this.input = input;
	}

	@Override
	public String toString() {
		return "LetterException [password should include at least a letter]" ;
	}	
}
